<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="css/options.css">
  <title>Markup Pen Options</title>
  <style type="text/css">
  #diybox span{display: inline-block;width:16px;height: 12px;border-radius: 3px;}
  </style>
</head>
<body>
  <header>
    <img src="img/extension.png" />
    <h1 id="widget-name">Markup Pen</h1>
    <h2>By <span id="widget-author"><a href="http://twitter.com/siemonday">Siemon</a></h2>
  </header>
  <section>
    <h3>Customize default color for markup pen</h3>
    <fieldset>
     <select name="colour" id="colour" />
       <option value="yellow">Default Yellow</option>
       <option value="#f47983">Red</option>
       <option value="#44cef6">Blue</option>
       <option value="#96ce54">Green</option>
     </select>
    </fieldset>
    <h3>Add more colors</h3>
    <fieldset id="diybox">
     <input name="picker" id="picker" type="color" />
    </fieldset>
  </section>
  <footer>
    <p>This extension works well with sites with simple DOM structures such as http://m.bbc.co.uk/news.It may have some problems with other sites.So if it cannot work for you,please contact me.Thank you.You can <a href="http://twitter.com/siemonday">tweet me</a> or <a href="mailto:siemonday@gmail.com">email me</a>,I'll solve the problem in the next version.</p>
  </footer>
<script type="text/javascript">
addEventListener(
  'DOMContentLoaded',function(){
    var s=widget.preferences;
    var colour=document.getElementById("colour");
    colour.addEventListener('change',function(){
      s.colour=this.value;
    },false);
    if(s.colour) colour.value=s.colour;
    //color picker
    var picker=document.getElementById("picker");
    var diybox=document.getElementById("diybox");
    picker.addEventListener('change',function(){
      var onecolor=document.createElement('span');
      onecolor.style.background=this.value;
      diybox.appendChild(onecolor);
      s.diycolors+=this.value+'|';
    },false);
  },false
  );
</script>
</body>
</html>